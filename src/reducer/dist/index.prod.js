"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reducer=exports.initialState=void 0;var types=_interopRequireWildcard(require("../actions/types")),_index=require("../tools/index"),_uuid=_interopRequireDefault(require("uuid"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((r=o?Object.getOwnPropertyDescriptor(e,i):null)&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i])}return n.default=e,t&&t.set(e,n),n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var initialState={budgets:[],currentBudget:{amount:2e3,used:0,timestamp:new Date,remaining:2e3,currency:"N",items:[{_id:_uuid.default.v4(),name:"rice",price:600},{_id:_uuid.default.v4(),name:"beans",price:400},{_id:_uuid.default.v4(),name:"tomatoes",price:300}]},currencyList:["N","USD","F","E"],showHint:!0,settings:{allowOverflow:!1,darkTheme:!1,fontSize:16,hideSidebar:!1}};exports.initialState=initialState;var reducer=function(e,t){var r=0<arguments.length&&void 0!==e?e:{},n=1<arguments.length?t:void 0,o=r.currentBudget;switch(n.type){case types.CREATE_BUDGET:return console.log("CREATE_BUDGET dispatched"),_objectSpread({},r);case types.OPEN_BUDGET:return o=r.budgets.find(function(e){return e._id==n.payload}),_objectSpread({},r,{},o);case types.SAVE_BUDGET:case types.DELETE_BUDGET:return _objectSpread({},r);case types.UPDATE_BUDGET:var i=n.payload,o=_objectSpread({},o,_defineProperty({},i.field,i.value));return console.log(o),_objectSpread({},r,{currentBudget:o});case types.ADD_ITEM:var u={_id:_uuid.default.v4(),name:"",price:0};return o.items.push(u),_objectSpread({},r,{},o);case types.SET_ITEM:var a,c,p=o.items.map(function(e){return e._id===n.payload._id&&(e[n.payload.field]=n.payload.value),e});return o=_objectSpread({},o,{items:p}),"price"===n.payload.field&&(console.log(_typeof(n.payload.value)),a=o.items.reduce(function(e,t){return e+t.price},0),console.log("used",a),c=o.amount-a,console.log("remaining",c),o=_objectSpread({},o,{used:a,remaining:c}),console.log(o)),_objectSpread({},r,{currentBudget:o});case types.DELETE_ITEM:case types.UPDATE_ITEM:return _objectSpread({},r)}};exports.reducer=reducer;