"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reducer=exports.initialState=void 0;var types=_interopRequireWildcard(require("../actions/types")),_index=require("../tools/index"),_uuid=_interopRequireDefault(require("uuid")),_testBudget=_interopRequireDefault(require("./testBudget"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((r=n?Object.getOwnPropertyDescriptor(e,i):null)&&(r.get||r.set)?Object.defineProperty(o,i,r):o[i]=e[i])}return o.default=e,t&&t.set(e,o),o}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var initialState={budgets:_testBudget.default,currentBudget:{_id:_uuid.default.v4(),amount:2e3,used:0,timestamp:new Date,remaining:2e3,currency:"N",items:[{_id:_uuid.default.v4(),name:"rice",price:600},{_id:_uuid.default.v4(),name:"beans",price:400},{_id:_uuid.default.v4(),name:"tomatoes",price:300}]},currencyList:["N","USD","F","E"],showHint:!0,notification:{type:"success",msg:"App loaded successfully",show:!1},settings:{allowOverflow:!1,darkTheme:!1,fontSize:16,hideSidebar:!1}};exports.initialState=initialState;var reducer=function(e,t){var r=0<arguments.length&&void 0!==e?e:{},o=1<arguments.length?t:void 0,n=r.currentBudget;switch(o.type){case types.CREATE_BUDGET:return console.log("CREATE_BUDGET dispatched"),_objectSpread({},r);case types.OPEN_BUDGET:return n=r.budgets.find(function(e){return e._id==o.payload}),_objectSpread({},r,{},n);case types.SAVE_BUDGET:case types.DELETE_BUDGET:return _objectSpread({},r);case types.UPDATE_BUDGET:var i=o.payload,n=_objectSpread({},n,_defineProperty({},i.field,i.value));return console.log(n),_objectSpread({},r,{currentBudget:n});case types.SORT_BUDGET:var u=n.items;return n.items=u.sort(function(e,t){return e.price<t.price?1:-1}),console.log(n),_objectSpread({},r,{currentBudget:n});case types.ADD_ITEM:var a={_id:_uuid.default.v4(),name:"",price:0};return n.items.push(a),_objectSpread({},r,{},n);case types.SET_ITEM:var c,s,p=n.items.map(function(e){return e._id===o.payload._id&&(e[o.payload.field]=o.payload.value),e});return n=_objectSpread({},n,{items:p}),"price"===o.payload.field&&(console.log(_typeof(o.payload.value)),c=n.items.reduce(function(e,t){return e+t.price},0),console.log("used",c),s=n.amount-c,console.log("remaining",s),n=_objectSpread({},n,{used:c,remaining:s}),console.log(n)),_objectSpread({},r,{currentBudget:n});case types.DELETE_ITEM:case types.UPDATE_ITEM:return _objectSpread({},r);case types.TOGGLE_HELP:return _objectSpread({},r,{showHints:!r.showHints});case types.HIDE_NOTIFICATION:var d=r.notification;return d.show=!d.show,_objectSpread({},r,{notification:d})}};exports.reducer=reducer;